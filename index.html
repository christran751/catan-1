<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CATAN LEADERBOARD ‚Äî Total Wins Only</title>
<style>
:root {
  --bg-overlay: rgba(255,255,255,0.88);
  --dark:#5b3b2a;
  --gold:#d9a35e;
  --accent:#eac696;
  --soft:#fff7e9;
}

body {
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background-image: url('5cf205c9-fa25-4712-98c0-0c538c11987d.png');
  background-position: center 60%;
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-color: #efe0c8;
  position: relative;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  animation: floatBg 20s ease-in-out infinite;
  transition: background-size 2s ease;
}

@keyframes floatBg {
  0%,100%{background-position:50% 50%;}
  50%{background-position:55% 45%;}
}

@media (max-width:768px){
  body { background-attachment: scroll; background-size: cover; }
}

header {
  text-align:center;
  padding:2rem 1rem 1rem;
}
header h1 {
  font-size:clamp(1.8rem,4vw,3rem);
  color:var(--dark);
  margin:0 0 0.5rem;
  letter-spacing:1px;
}

.card {
  background:var(--bg-overlay);
  border-radius:18px;
  padding:1rem;
  box-shadow:0 10px 40px rgba(0,0,0,0.15);
  border:6px solid var(--gold);
  width:95%;
  max-width:850px;
  margin-bottom:3rem;
  overflow-x:auto;
}

.table-container {
  width:100%;
  overflow-x:auto;
}

table {
  width:100%;
  border-collapse:collapse;
  font-size:clamp(0.9rem,2.2vw,1rem);
  min-width:600px;
}

th, td {
  border-bottom:1px solid #ddd;
  padding:0.6rem;
}

th {
  background:var(--dark);
  color:white;
  text-transform:uppercase;
  letter-spacing:0.05em;
}

tr:hover { background:#fffaf3; }

td.center { text-align:center; }

.gold { background-color:rgba(255,215,0,0.15)!important; }
.silver { background-color:rgba(192,192,192,0.15)!important; }
.bronze { background-color:rgba(205,127,50,0.15)!important; }
.leader { font-weight:bold; color:var(--dark); }

button {
  background:var(--dark);
  color:white;
  border:none;
  border-radius:8px;
  padding:0.5rem 0.9rem;
  cursor:pointer;
  font-weight:600;
  transition:all .2s ease;
}
button:hover { background:var(--gold); color:var(--dark); }
button.muted {
  background:#aaa;
  color:white;
}
button.muted:hover { background:#888; }

.remove-player {
  background:none;
  color:#c00;
  font-size:1.2rem;
  cursor:pointer;
  border:none;
  opacity:0;
  transition:opacity .2s ease;
}
tr:hover .remove-player { opacity:1; }

.controls {
  display:flex;
  flex-wrap:wrap;
  gap:0.5rem;
  justify-content:center;
  margin:1rem 0;
}

.notes {
  text-align:center;
  color:#666;
  font-size:0.9rem;
  margin-top:0.3rem;
}

input, [contenteditable] { font-size:16px; }

@media (max-width:720px) {
  th, td { padding:0.5rem; font-size:0.85rem; }
}

@media (max-width:480px) {
  th:nth-child(2), td:nth-child(2) { display:none; }
  th:first-child, td:first-child { text-align:left; }
}
</style>
</head>

<body>
<header>
  <h1>CATAN LEADERBOARD</h1>
</header>

<main class="card">
  <div class="table-container">
    <table id="leaderboard">
      <thead>
        <tr>
          <th>Player</th>
          <th class="center">Base Game</th>
          <th class="center">Seafarers</th>
          <th class="center">Cities & Knights</th>
          <th class="center">Total Wins</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="name" contenteditable="true" data-label="Player Name">Alice</td>
          <td class="center" contenteditable="true" data-label="Base Game">3</td>
          <td class="center" contenteditable="true" data-label="Seafarers">1</td>
          <td class="center" contenteditable="true" data-label="Cities & Knights">2</td>
          <td class="center total-wins" data-label="Total Wins">6</td>
          <td><button class="remove-player">üóëÔ∏è</button></td>
        </tr>
        <tr>
          <td class="name" contenteditable="true" data-label="Player Name">Bob</td>
          <td class="center" contenteditable="true" data-label="Base Game">2</td>
          <td class="center" contenteditable="true" data-label="Seafarers">3</td>
          <td class="center" contenteditable="true" data-label="Cities & Knights">1</td>
          <td class="center total-wins" data-label="Total Wins">6</td>
          <td><button class="remove-player">üóëÔ∏è</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="controls" role="region" aria-label="controls">
    <button id="recalc">Calculate Totals</button>
    <button id="clear" class="muted">Clear Scores</button>
    <button id="add-player">Add Player</button>
    <button id="remove-game" class="muted">Remove Game</button>
    <button id="add-game">Add Game</button>
  </div>
  <p id="last-updated" class="notes">Last updated: never</p>
</main>

<script>
function toNumText(s) {
  if(!s) return 0;
  s=String(s).trim().replace(/[^0-9\-\.]/g,'');
  const n=parseFloat(s);
  return isNaN(n)?0:n;
}

function recalc() {
  const tbody=document.querySelector('#leaderboard tbody');
  const rows=Array.from(tbody.querySelectorAll('tr'));
  const totalColIndex = document.querySelectorAll('#leaderboard thead th').length - 1;

  rows.forEach(row=>{
    const cells = Array.from(row.querySelectorAll('td'));
    let rowWins=0;
    for(let c=1;c<totalColIndex;c++) rowWins+=toNumText(cells[c].innerText);
    row.querySelector('.total-wins').innerText=rowWins;
  });

  rows.sort((a,b)=>toNumText(b.querySelector('.total-wins').innerText)-toNumText(a.querySelector('.total-wins').innerText));

  rows.forEach(row=>row.classList.remove('gold','silver','bronze','leader'));
  rows.forEach((row,i)=>{
    tbody.appendChild(row);
    if(i===0) row.classList.add('gold','leader');
    else if(i===1) row.classList.add('silver');
    else if(i===2) row.classList.add('bronze');
  });

  document.getElementById('last-updated').textContent=`Last updated: ${new Date().toLocaleTimeString()}`;
  saveTable();
}

function saveTable(){
  const table=document.querySelector("#leaderboard");
  localStorage.setItem("catanLeaderboardHTML", table.outerHTML);
}

function loadTable(){
  const saved=localStorage.getItem("catanLeaderboardHTML");
  if(saved) document.querySelector("#leaderboard").outerHTML=saved;
  attachCellEvents();
  attachRemoveButtons();
  recalc();
}

function attachCellEvents(){
  document.querySelectorAll('#leaderboard td[contenteditable]').forEach(cell=>{
    cell.addEventListener('blur', recalc);
    cell.addEventListener('keydown', e=>{
      if(e.key==='Enter'){ e.preventDefault(); cell.blur(); }
    });
  });
}

document.getElementById('add-player').addEventListener('click', ()=>{
  const tbody=document.querySelector('#leaderboard tbody');
  const headerCells=document.querySelectorAll('#leaderboard thead th');
  const totalColIndex = headerCells.length-1;
  const row=document.createElement('tr');
  let html=`<td class="name" contenteditable="true" data-label="Player Name">New Player</td>`;
  for(let i=1;i<totalColIndex;i++) html+=`<td class="center" contenteditable="true" data-label="${headerCells[i].innerText}">0</td>`;
  html+=`<td class="center total-wins" data-label="Total Wins">0</td>`;
  html+=`<td><button class="remove-player">üóëÔ∏è</button></td>`;
  row.innerHTML=html;
  tbody.appendChild(row);
  attachCellEvents();
  attachRemoveButtons();
  recalc();
});

document.getElementById('add-game').addEventListener('click', ()=>{
  const table=document.getElementById('leaderboard');
  const theadRow=table.querySelector('thead tr');
  const thTotal=theadRow.querySelector('th:last-child');
  const newGameName=prompt("Enter new game name:","Catan Expansion");
  if(!newGameName) return;
  const newTh=document.createElement('th');
  newTh.className='center';
  newTh.textContent=newGameName;
  theadRow.insertBefore(newTh,thTotal);
  table.querySelectorAll('tbody tr').forEach(row=>{
    const totalCell=row.querySelector('.total-wins');
    const newTd=document.createElement('td');
    newTd.className='center';
    newTd.contentEditable='true';
    newTd.dataset.label=newGameName;
    newTd.textContent='0';
    row.insertBefore(newTd,totalCell);
  });
  attachCellEvents();
  recalc();
});

function attachRemoveButtons(){
  document.querySelectorAll('.remove-player').forEach(btn=>{
    btn.onclick=()=>{
      if(confirm('Remove this player?')) { btn.closest('tr').remove(); recalc(); }
    }
  });
}

document.getElementById('remove-game').addEventListener('click', ()=>{
  const headers=Array.from(document.querySelectorAll('#leaderboard thead th'));
  const totalHeader=headers[headers.length-1];
  const gameHeaders=headers.slice(1,-1).map(h=>h.textContent);
  const toRemove=prompt("Enter the game name to remove:\n"+gameHeaders.join(', '));
  if(!toRemove) return;
  const index=gameHeaders.indexOf(toRemove);
  if(index===-1){ alert("No such game found."); return; }
  headers[index+1].remove();
  document.querySelectorAll('#leaderboard tbody tr').forEach(row=>{ row.querySelectorAll('td')[index+1].remove(); });
  recalc();
});

document.getElementById('clear').addEventListener('click', ()=>{
  document.querySelectorAll('#leaderboard tbody tr').forEach(row=>{
    const scoreCells=row.querySelectorAll('td.center[contenteditable="true"]');
    scoreCells.forEach(cell=>cell.textContent='0');
  });
  recalc();
});

document.getElementById('recalc').addEventListener('click', recalc);
window.addEventListener('load', loadTable);
</script>
</body>
</html>



